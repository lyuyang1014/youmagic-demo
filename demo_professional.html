<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>YOUMAGIC® 专业美学分析系统</title>
    <link rel="stylesheet" href="demo_styles.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
</head>
<body>
    <div class="app-container">
        <!-- 导航栏 -->
        <nav class="main-nav">
            <div class="nav-brand">
                <h1>YOUMAGIC®</h1>
                <span>专业美学分析系统</span>
            </div>
            <div class="nav-steps">
                <span class="step active" data-step="1">基础信息</span>
                <span class="step" data-step="2">面部分析</span>
                <span class="step" data-step="3">治疗方案</span>
                <span class="step" data-step="4">效果预期</span>
            </div>
        </nav>

        <!-- 步骤1：基础信息收集 -->
        <section class="step-section active" id="step-1">
            <div class="container">
                <h2 class="section-title">个人信息采集</h2>
                <div class="two-column">
                    <div class="column">
                        <div class="photo-upload-area">
                            <div class="photo-placeholder" id="photoUpload">
                                <div class="upload-icon">📷</div>
                                <p>点击上传您的正面照片</p>
                                <small>建议：光线充足，表情自然，无美颜</small>
                            </div>
                            <input type="file" id="photoInput" accept="image/*" style="display: none;">
                        </div>
                    </div>
                    <div class="column">
                        <div class="form-group">
                            <label>姓名</label>
                            <input type="text" id="userName" placeholder="请输入您的姓名">
                        </div>
                        <div class="form-group">
                            <label>年龄</label>
                            <input type="number" id="userAge" min="18" max="70" placeholder="25">
                        </div>
                        <div class="form-group">
                            <label>性别</label>
                            <select id="userGender">
                                <option value="female">女</option>
                                <option value="male">男</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>皮肤类型</label>
                            <select id="skinType">
                                <option value="dry">干性皮肤</option>
                                <option value="oily">油性皮肤</option>
                                <option value="combination">混合性皮肤</option>
                                <option value="sensitive">敏感肌肤</option>
                            </select>
                        </div>
                    </div>
                </div>
                
                <div class="concerns-section">
                    <h3>主要美学困扰（可多选）</h3>
                    <div class="concerns-grid">
                        <label class="concern-item">
                            <input type="checkbox" value="sagging">
                            <span class="checkmark"></span>
                            <div class="concern-content">
                                <strong>面部松弛</strong>
                                <small>下颌线模糊、苹果肌下垂</small>
                            </div>
                        </label>
                        <label class="concern-item">
                            <input type="checkbox" value="wrinkles">
                            <span class="checkmark"></span>
                            <div class="concern-content">
                                <strong>皱纹细纹</strong>
                                <small>法令纹、抬头纹、鱼尾纹</small>
                            </div>
                        </label>
                        <label class="concern-item">
                            <input type="checkbox" value="pores">
                            <span class="checkmark"></span>
                            <div class="concern-content">
                                <strong>毛孔粗大</strong>
                                <small>T区毛孔明显、肌理粗糙</small>
                            </div>
                        </label>
                        <label class="concern-item">
                            <input type="checkbox" value="pigmentation">
                            <span class="checkmark"></span>
                            <div class="concern-content">
                                <strong>色素沉着</strong>
                                <small>色斑、晒斑、黄褐斑</small>
                            </div>
                        </label>
                    </div>
                </div>
                
                <button class="btn-primary" onclick="nextStep()">开始面部分析</button>
            </div>
        </section>

        <!-- 步骤2：面部分析 -->
        <section class="step-section" id="step-2">
            <div class="container">
                <h2 class="section-title">AI智能面部分析</h2>
                
                <!-- 分析进度 -->
                <div class="analysis-progress" id="analysisProgress">
                    <div class="progress-item active">
                        <div class="progress-icon">🔍</div>
                        <span>面部特征识别</span>
                    </div>
                    <div class="progress-item">
                        <div class="progress-icon">📊</div>
                        <span>皮肤质量检测</span>
                    </div>
                    <div class="progress-item">
                        <div class="progress-icon">🎯</div>
                        <span>问题区域定位</span>
                    </div>
                    <div class="progress-item">
                        <div class="progress-icon">✅</div>
                        <span>分析完成</span>
                    </div>
                </div>

                <!-- 分析结果 -->
                <div class="analysis-results" id="analysisResults" style="display: none;">
                    <div class="two-column">
                        <div class="column">
                            <!-- 交互式面部地图 -->
                            <div class="face-analysis-container">
                                <h3>交互式面部分析地图</h3>
                                <div class="face-map" id="faceMap">
                                    <canvas id="faceCanvas" width="300" height="400"></canvas>
                                    <div class="face-overlay">
                                        <!-- 增强版面部热点 -->
                                        <div class="hotspot medium" style="top: 65px; left: 135px;" 
                                             data-region="前额" 
                                             data-issue="细纹形成" 
                                             data-severity="medium"
                                             data-description="前额横纹，建议紧致提升">1</div>
                                        
                                        <div class="hotspot mild" style="top: 120px; left: 110px;" 
                                             data-region="左眼周" 
                                             data-issue="鱼尾纹" 
                                             data-severity="mild"
                                             data-description="轻微动态纹路，预防性护理">2</div>
                                        
                                        <div class="hotspot mild" style="top: 120px; left: 165px;" 
                                             data-region="右眼周" 
                                             data-issue="鱼尾纹" 
                                             data-severity="mild"
                                             data-description="轻微动态纹路，预防性护理">3</div>
                                        
                                        <div class="hotspot mild" style="top: 165px; left: 95px;" 
                                             data-region="左面颊" 
                                             data-issue="轻微松弛" 
                                             data-severity="mild"
                                             data-description="初期松弛，定期维护">4</div>
                                        
                                        <div class="hotspot mild" style="top: 165px; left: 180px;" 
                                             data-region="右面颊" 
                                             data-issue="轻微松弛" 
                                             data-severity="mild"
                                             data-description="初期松弛，定期维护">5</div>
                                        
                                        <div class="hotspot severe" style="top: 300px; left: 135px;" 
                                             data-region="下颌线" 
                                             data-issue="松弛下垂" 
                                             data-severity="severe"
                                             data-description="重点改善区域，需集中治疗">6</div>
                                    </div>
                                </div>
                                <div class="region-details" id="regionDetails">
                                    <p>点击面部标记点查看详细分析</p>
                                </div>
                            </div>
                        </div>
                        
                        <div class="column">
                            <!-- 综合评分雷达图 -->
                            <div class="chart-container">
                                <h3>皮肤健康指数</h3>
                                <canvas id="radarChart" width="300" height="300"></canvas>
                            </div>
                            
                            <!-- 移动端简化皮肤指数 -->
                            <div class="mobile-skin-scores">
                                <h3>皮肤健康指数</h3>
                                <div class="mobile-scores-grid">
                                    <div class="mobile-score-item">
                                        <div class="mobile-score-label">弹性</div>
                                        <div class="mobile-score-value">68</div>
                                        <div class="mobile-score-bar">
                                            <div class="mobile-score-fill" style="width: 68%"></div>
                                        </div>
                                    </div>
                                    <div class="mobile-score-item">
                                        <div class="mobile-score-label">水分</div>
                                        <div class="mobile-score-value">45</div>
                                        <div class="mobile-score-bar">
                                            <div class="mobile-score-fill" style="width: 45%"></div>
                                        </div>
                                    </div>
                                    <div class="mobile-score-item">
                                        <div class="mobile-score-label">紧致</div>
                                        <div class="mobile-score-value">62</div>
                                        <div class="mobile-score-bar">
                                            <div class="mobile-score-fill" style="width: 62%"></div>
                                        </div>
                                    </div>
                                    <div class="mobile-score-item">
                                        <div class="mobile-score-label">均匀</div>
                                        <div class="mobile-score-value">78</div>
                                        <div class="mobile-score-bar">
                                            <div class="mobile-score-fill" style="width: 78%"></div>
                                        </div>
                                    </div>
                                    <div class="mobile-score-item">
                                        <div class="mobile-score-label">光泽</div>
                                        <div class="mobile-score-value">55</div>
                                        <div class="mobile-score-bar">
                                            <div class="mobile-score-fill" style="width: 55%"></div>
                                        </div>
                                    </div>
                                    <div class="mobile-score-item">
                                        <div class="mobile-score-label">细腻</div>
                                        <div class="mobile-score-value">72</div>
                                        <div class="mobile-score-bar">
                                            <div class="mobile-score-fill" style="width: 72%"></div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- 年龄分析 -->
                            <div class="age-analysis">
                                <h3>肌肤年龄评估</h3>
                                <div class="age-comparison">
                                    <div class="age-item">
                                        <span class="age-label">实际年龄</span>
                                        <span class="age-value" id="realAge">25</span>
                                    </div>
                                    <div class="age-item">
                                        <span class="age-label">肌肤年龄</span>
                                        <span class="age-value" id="skinAge">28</span>
                                    </div>
                                    <div class="age-gap" id="ageGap">+3岁</div>
                                </div>
                                <div class="age-recommendation">
                                    <p>您的肌肤年龄略高于实际年龄，建议进行紧致提升护理</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- 详细数据面板 -->
                    <div class="data-panels">
                        <div class="data-panel">
                            <h4>弹性指数</h4>
                            <div class="progress-bar">
                                <div class="progress-fill" style="width: 68%"></div>
                            </div>
                            <span class="score">68/100</span>
                        </div>
                        <div class="data-panel">
                            <h4>水分含量</h4>
                            <div class="progress-bar">
                                <div class="progress-fill" style="width: 45%"></div>
                            </div>
                            <span class="score">45/100</span>
                        </div>
                        <div class="data-panel">
                            <h4>紧致度</h4>
                            <div class="progress-bar">
                                <div class="progress-fill" style="width: 62%"></div>
                            </div>
                            <span class="score">62/100</span>
                        </div>
                        <div class="data-panel">
                            <h4>均匀度</h4>
                            <div class="progress-bar">
                                <div class="progress-fill" style="width: 78%"></div>
                            </div>
                            <span class="score">78/100</span>
                        </div>
                    </div>
                </div>
                
                <button class="btn-primary" id="nextToTreatment" onclick="nextStep()" style="display: none;">制定治疗方案</button>
            </div>
        </section>

        <!-- 步骤3：治疗方案 -->
        <section class="step-section" id="step-3">
            <div class="container">
                <h2 class="section-title">个性化治疗方案</h2>
                
                <div class="treatment-customizer">
                    <div class="customizer-sidebar">
                        <h3>参数调节</h3>
                        
                        <div class="parameter-group">
                            <label>治疗强度</label>
                            <input type="range" id="intensitySlider" min="1" max="10" value="6" class="slider">
                            <div class="slider-labels">
                                <span>温和</span>
                                <span>强效</span>
                            </div>
                        </div>
                        
                        <div class="parameter-group">
                            <label>脉冲频率</label>
                            <input type="range" id="frequencySlider" min="1" max="5" value="3" class="slider">
                            <div class="slider-labels">
                                <span>低频</span>
                                <span>高频</span>
                            </div>
                        </div>
                        
                        <div class="parameter-group">
                            <label>治疗深度</label>
                            <input type="range" id="depthSlider" min="1" max="3" value="2" class="slider">
                            <div class="slider-labels">
                                <span>浅层</span>
                                <span>深层</span>
                            </div>
                        </div>
                        
                        <div class="treatment-areas">
                            <h4>重点治疗区域</h4>
                            <label class="area-checkbox">
                                <input type="checkbox" checked>
                                <span>下颌线提升</span>
                            </label>
                            <label class="area-checkbox">
                                <input type="checkbox">
                                <span>面颊紧致</span>
                            </label>
                            <label class="area-checkbox">
                                <input type="checkbox">
                                <span>法令纹改善</span>
                            </label>
                        </div>
                    </div>
                    
                    <div class="customizer-preview">
                        <h3>治疗效果预览</h3>
                        <div class="before-after-container">
                            <div class="comparison-slider">
                                <div class="before-image">
                                    <img id="beforeTreatmentImg" src="face.png" alt="治疗前" style="filter: none;">
                                    <span class="image-label">治疗前</span>
                                </div>
                                <div class="after-image">
                                    <img id="afterTreatmentImg" src="treat.png" alt="治疗后" style="filter: none;">
                                    <span class="image-label">预期效果</span>
                                </div>
                                <input type="range" class="comparison-control" min="0" max="100" value="50" id="comparisonSlider">
                            </div>
                            
                            <!-- 移动端专用简化预览 -->
                            <div class="mobile-treatment-preview">
                                <h4>治疗效果对比</h4>
                                <div class="mobile-comparison-grid">
                                    <div class="mobile-comparison-item">
                                        <img src="face.png" alt="治疗前">
                                        <span class="mobile-image-label">治疗前</span>
                                    </div>
                                    <div class="mobile-comparison-arrow">→</div>
                                    <div class="mobile-comparison-item">
                                        <img src="treat.png" alt="治疗后">
                                        <span class="mobile-image-label">预期效果</span>
                                    </div>
                                </div>
                                <div class="mobile-improvement-indicator">
                                    <span class="mobile-improvement-label">预期改善程度</span>
                                    <div class="mobile-improvement-bar">
                                        <div class="mobile-improvement-fill" id="mobileImprovementFill" style="width: 75%"></div>
                                    </div>
                                    <span class="mobile-improvement-value" id="mobileImprovementValue">75%</span>
                                </div>
                            </div>
                        </div>
                        
                        <div class="effect-metrics">
                            <div class="metric">
                                <span class="metric-label">预期改善程度</span>
                                <span class="metric-value" id="improvementRate">75%</span>
                            </div>
                            <div class="metric">
                                <span class="metric-label">疼痛程度</span>
                                <span class="metric-value" id="painLevel">轻微</span>
                            </div>
                            <div class="metric">
                                <span class="metric-label">恢复时间</span>
                                <span class="metric-value" id="recoveryTime">2-3天</span>
                            </div>
                            <div class="metric">
                                <span class="metric-label">预估费用</span>
                                <span class="metric-value" id="estimatedCost">¥8,800</span>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="treatment-plans">
                    <h3>推荐治疗方案</h3>
                    <div class="plans-grid">
                        <div class="plan-card recommended">
                            <div class="plan-badge">推荐</div>
                            <h4>标准提升方案</h4>
                            <div class="plan-params">
                                <span>强度: 中等</span>
                                <span>发数: 900发</span>
                                <span>时长: 45分钟</span>
                            </div>
                            <div class="plan-price">¥8,800</div>
                            <p>适合初次体验，平衡效果与舒适度</p>
                        </div>
                        
                        <div class="plan-card">
                            <h4>温和舒适方案</h4>
                            <div class="plan-params">
                                <span>强度: 低等</span>
                                <span>发数: 1200发</span>
                                <span>时长: 60分钟</span>
                            </div>
                            <div class="plan-price">¥7,200</div>
                            <p>敏感肌适用，温和改善无负担</p>
                        </div>
                        
                        <div class="plan-card">
                            <h4>高效强化方案</h4>
                            <div class="plan-params">
                                <span>强度: 高等</span>
                                <span>发数: 600发</span>
                                <span>时长: 30分钟</span>
                            </div>
                            <div class="plan-price">¥12,800</div>
                            <p>追求显著效果，适合有经验者</p>
                        </div>
                    </div>
                </div>
                
                <button class="btn-primary" onclick="nextStep()">查看效果预期</button>
            </div>
        </section>

        <!-- 步骤4：效果预期 -->
        <section class="step-section" id="step-4">
            <div class="container">
                <h2 class="section-title">治疗效果预期与时间规划</h2>
                
                <div class="timeline-container">
                    <h3>效果时间轴</h3>
                    <div class="timeline-simulator">
                        <input type="range" id="timelineSlider" min="0" max="180" value="0" class="timeline-control">
                        <div class="timeline-labels">
                            <span>治疗当天</span>
                            <span>1个月</span>
                            <span>3个月</span>
                            <span>6个月</span>
                        </div>
                    </div>
                    
                    <div class="timeline-effects">
                        <div class="effect-stage active" data-stage="0">
                            <h4>治疗当天 - 即刻效果</h4>
                            <div class="effect-details">
                                <div class="effect-chart">
                                    <canvas id="immediateChart" width="200" height="200"></canvas>
                                </div>
                                <div class="effect-description">
                                    <p><strong>胶原蛋白即刻收缩</strong></p>
                                    <p>• 约20-30%的紧致提升效果</p>
                                    <p>• 面部轮廓感增强</p>
                                    <p>• 轻微红肿（正常反应）</p>
                                </div>
                            </div>
                        </div>
                        
                        <div class="effect-stage" data-stage="30">
                            <h4>治疗后1个月 - 稳定期</h4>
                            <div class="effect-details">
                                <div class="effect-chart">
                                    <canvas id="monthChart" width="200" height="200"></canvas>
                                </div>
                                <div class="effect-description">
                                    <p><strong>胶原重塑开始</strong></p>
                                    <p>• 皮肤质感变细腻</p>
                                    <p>• 紧实度提升</p>
                                    <p>• 效果逐渐显现</p>
                                </div>
                            </div>
                        </div>
                        
                        <div class="effect-stage" data-stage="90">
                            <h4>治疗后3个月 - 效果高峰</h4>
                            <div class="effect-details">
                                <div class="effect-chart">
                                    <canvas id="peakChart" width="200" height="200"></canvas>
                                </div>
                                <div class="effect-description">
                                    <p><strong>胶原新生达到高峰</strong></p>
                                    <p>• 面部轮廓显著改善</p>
                                    <p>• 松弛和皱纹明显减少</p>
                                    <p>• 最佳效果期</p>
                                </div>
                            </div>
                        </div>
                        
                        <div class="effect-stage" data-stage="180">
                            <h4>治疗后6个月 - 维持期</h4>
                            <div class="effect-details">
                                <div class="effect-chart">
                                    <canvas id="maintainChart" width="200" height="200"></canvas>
                                </div>
                                <div class="effect-description">
                                    <p><strong>效果长期维持</strong></p>
                                    <p>• 胶原结构稳定</p>
                                    <p>• 效果可维持12-18个月</p>
                                    <p>• 可考虑二次治疗</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="final-report">
                    <h3>专属分析报告</h3>
                    <div class="report-summary">
                        <div class="report-item">
                            <strong>综合改善预期</strong>
                            <span class="improvement-score">78%</span>
                        </div>
                        <div class="report-item">
                            <strong>重点改善区域</strong>
                            <span>下颌线、面颊紧致</span>
                        </div>
                        <div class="report-item">
                            <strong>推荐治疗方案</strong>
                            <span>标准提升方案</span>
                        </div>
                        <div class="report-item">
                            <strong>预估维持时间</strong>
                            <span>12-15个月</span>
                        </div>
                    </div>
                    
                    <div class="action-buttons">
                        <button class="btn-secondary" onclick="generateReport()">生成完整报告</button>
                        <button class="btn-primary" onclick="bookConsultation()">预约面诊</button>
                    </div>
                </div>
            </div>
        </section>
    </div>

    <!-- 桌面端浮动面板 -->
    <div class="floating-panel" id="floatingPanel">
        <div class="panel-header">
            <h4>实时数据监控</h4>
            <button class="panel-toggle" onclick="togglePanel()">📊</button>
        </div>
        <div class="panel-content">
            <div class="mini-chart">
                <canvas id="miniChart" width="150" height="100"></canvas>
            </div>
            <div class="quick-stats">
                <div class="stat">
                    <span class="stat-label">当前改善程度</span>
                    <span class="stat-value" id="currentImprovement">75%</span>
                </div>
                <div class="stat">
                    <span class="stat-label">肌肤年龄变化</span>
                    <span class="stat-value" id="ageChange">-2岁</span>
                </div>
            </div>
        </div>
    </div>

    <!-- 移动端数据监控触发按钮 -->
    <button class="mobile-data-trigger" id="mobileDataTrigger" onclick="showMobileDataModal()">
        📊
    </button>

    <!-- 移动端数据模态框 -->
    <div class="mobile-data-modal" id="mobileDataModal">
        <div class="mobile-data-content">
            <div class="modal-header">
                <h3>实时数据监控</h3>
                <button class="modal-close" onclick="hideMobileDataModal()">×</button>
            </div>
            
            <div class="mobile-mini-chart">
                <canvas id="mobileMiniChart" width="250" height="150"></canvas>
            </div>
            
            <div class="mobile-quick-stats">
                <div class="mobile-stat">
                    <span class="mobile-stat-label">当前改善程度</span>
                    <span class="mobile-stat-value" id="mobileCurrentImprovement">75%</span>
                </div>
                <div class="mobile-stat">
                    <span class="mobile-stat-label">肌肤年龄变化</span>
                    <span class="mobile-stat-value" id="mobileAgeChange">-2岁</span>
                </div>
                <div class="mobile-stat">
                    <span class="mobile-stat-label">预期维持时间</span>
                    <span class="mobile-stat-value">12-15个月</span>
                </div>
                <div class="mobile-stat">
                    <span class="mobile-stat-label">治疗强度</span>
                    <span class="mobile-stat-value">中等</span>
                </div>
            </div>
        </div>
    </div>

    <script src="demo_scripts.js"></script>
</body>
</html> 